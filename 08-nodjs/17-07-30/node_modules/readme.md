### 准备开始
---
#### 学员反馈
  post请求中req.on('data', (data) 这个 .on 是干嘛的 请老师再讲讲。
    相当于addEventListener
    以上代码就是接收请求体数据的操作

  老师能简单介绍一下webpack吗 0-0

  哎！心累，表单请求的时候总是出现无法访问网站，跨域也不成功，怀疑人生啊

  加油 加油 加油 重要的事情说三遍 加油

  老师的思路很清晰，给老师大大的赞！！！
#### 复习
* 请求交互同步异步
    - 同步请求，name、相关属性都可以填写后，交给浏览器来执行
    - 异步,自助，所有事情自己完成，比如字段key和value、url、请求方式、发起请求、响应回来的操作
* 调试程序的方式
    - 输入127.0.0.1 什么数据都没有
    - F12 -> network(网络) ,请求是怎样的
    - 响应(空白或者数据不正确)
    - 服务器控制台(有没有报错)。没有报错
    - 后端路由（请求方式 + url），console.log('测试有没有进路由')
        + 如果没有进，调整url
        + 如果进了，就看后续为何没有响应或者为什么响应错误数据
* 跨域4种方式
    - 代理(以任意客户端而非浏览器来发起请求，不存在跨域的)
    - JSONP (动态创建script标签，全局挂载回调函数，将回调函数名作为url的查询字符串发送给服务器，服务器响应包含 回调函数名调用(数据作为参数) 的字符串)
        + 回调函数名调用(数据作为参数) 的字符串
        + callback_xxx( 对象)  的字符串
    - script标签返回的数据会被直接运行 由此调用全局的函数，并传递实参
    - CORS 服务器告诉浏览器有些请求，你不必管
    - JSONP 只支持get请求方式。没有兼容性，前后端都需要开发
    - CORS 只支持IE9以上，后端编写代码，前端无需调整
    - iframe跨域，01_main.html 所开启的iframe中，不跨域，就可以通过top属性访问到01_main里面的全局函数
    - 如果跨域了就不行了
    - 跨域以后挂载window.name,再访问同域下的iframe，通过top调用函数通知01_main
* node中对象类型
    - 全局对象 直接用 console global process Buffer require module exports dirname filename
    - 核心对象 require('fs||http||querystring||url') 无需下载
    - 第三方 require、下载
        + 我自己写的  require('./xxx.js') 无需下载
* 相关模块回顾
    - 一个文件就是一个模块
        + 一个模块引入默认对象，也可以向外导出对象
        + 在模块内声明的对象，属于模块的作用域
        + 只能通过module.exports =  xxxx 向外导出
        + 外部使用 let xxxx= require('./xxxx.js');
    - 全局共享
        + 使用global.xxx = xxx;全局共享

#### 今日重点
* NPM
* express开发web应用框架
* mongodb

### NPM
---
#### 介绍
* npm 随着node安装，附带安装到我们机器上的
* npm两重含义
    - * npm命令行工具
    - 网站
* package.json文件做当前包的信息描述
* name属性是很重要的，是唯一的
    - 在网站上有关于这个包依赖的包
    - 以及哪些包依赖这个包

#### 读取文件中文乱码
* ANSI 使用系统默认编码, GBK(总称)  (GB-3212) 国标3212
* 编码存的时候是中国的编码，解的时候能否用GBK来解码呢？

#### node中第三方包的查找机制
* 查找node_modules下找包名
* 同级目录往下找是不可能的
* 可以向上查找，直到当前盘符根目录下node_modules

#### 根据目录方式查找入口文件机制
* 1:查找node_modules下面包名下package.json文件的main属性有效
* 2:查找Node_modules下面包名.js
* 3:查找Node_modules下面包名文件夹下的index.js（了解）
* 总结:常见的包中，使用1/2的方式比较普遍

#### package.json文件
```javascript
{
  "name": "02_mypackage",   对应npm install 02_mypackage
  "version": "1.0.0",   在npm官网上也可以看到
  "description": "这是我们的包", 在npm官网上搜索能看到
  "main": "index.js",  程序入口
  "scripts": {
    npm run test
    方便简化命令的脚本
    "test": "ipconfig /all && notepad && ping 127.0.0.1" 
  },
  "keywords": [
    "哈哈" 关键字
  ],
  "author": "tjx",  作者
  "license": "ISC"  版权声明 禁止转载。。。商业用途之类的描述
}

```
* name包名，代表着唯一，如果当你使用的包名，和你的包名同名，就会出现无法下载
* 包名和安装的包同名了
    - `Refusing to install jquery as a dependency of itself `
* main是程序的入口

#### NPM常用命令
* 初始化Package.json文件 npm init -y
* 安装一个包 `npm install 包名@版本号 --save-dev`
* 安装一个包 `npm install 包名@版本号 --save`
* 卸载多个包 `npm un 包1 包2 -S`

#### npm 其他命令
* 查看包的信息（包括版本号信息）
    - `npm info 包名`
* 查看包的文档
    - `npm docs 包名`
* 比如当前npm默认镜像源无法下载，根据指定的源来下载
    - --registry 地址
    - `npm i jquery -S --registry https://registry.npm.taobao.org/`

### express
---
#### express介绍
* 框架: 框架本身执行我们写的代码
* 会丰富我们代码的本身功能，为了让我们更少的关注实现细节，更多的去关注业务的实现
* 底层封装的就是我们昨天前天所操作的一些Node的代码
* API非常友好   
    - 其保留了原生的node,http核心模块的api
        + res.end|write|writeHead|setHeader
        + 也可以同时使用express中的API更简化的完成需求
* TJ大神
    - 杀马特，平面设计师兼职艺术家，在js的领域有很多贡献
        
#### 启程helloworld
* 项目流程
    - 1:创建项目文件夹
    - 2:在文件夹内初始化package.json文件 `npm init -y`
    - 3:下载express将其保存在 dependencies `npm i express --save|| -S`
    - 4:编写代码app.js
        + 1:引入express对象
        + 2:创建一个服务器对象
        + 3:处理具体的请求
        + 4:监听端口

#### 中间件
* 案例:
    - 猜猜我是谁？

#### next
* 小练习
    - 精忠报国

#### 中间件类别(了解)

#### 路由中间件

#### res函数
```javascript
res.download()  
res.end()  
res.json()   
res.jsonp()  
res.redirect()    
res.send()  
res.sendFile()  
res.sendStatus()  
```

### 模板渲染
---
#### 使用art-template模板
```javascript
app.engine('art', require('express-art-template'));
app.set('view options', {
    debug: process.env.NODE_ENV !== 'production' 
});

```

#### url上的参数
* 查询字符串
* path

#### 内置中间件

#### 第三方中间件(post请求参数的获取)
* 使用在router中间件顺序的前面
* `app.use(bodyParser.urlencoded({ extended: false }));`

#### 错误处理中间件
* 4个参数的中间件

#### 处理错误页面
* 避免404的出现，`router.all('*',(req,res)=>{输出404页面})`

### MONGODB
---
#### 数据库概念

#### 数据库本身也是程序

#### 数据库的历史

#### sql与nosql

#### 开启器服务器常见问题
*` 32-bit servers don't have journaling enabled by default. Please use --journal if you want durability. `
    - 对应的启动命令就是 
    -   `mongod --dbpath="路径" --journal --storageEngine=mmapv1 `


#### 客户端登录后

#### MONGODB数据库结构关系

### CRUD(Create、Retrieve、Update、Delete)增删改查
---
* C 插入数据
* D 删除数据
* U 修改数据
* R 查询数据

### 扩展
---
#### 条件查询
```javascript
(>) 大于 - $gt (greater then)
(<) 小于 - $lt (less then)
(>=) 大于等于 - $gte (greater then or equal)
(<= ) 小于等于 - $lte (less then or equal)
(!=) 不等于 - $ne (not equal)

```
* 练习：
   1.查询姓名为小红的学生
   2.查询成绩大于90分的同学  
   3.查询成绩不等于95的同学
   4.查询大于等于77分的所有同学
     5.查询小于等于77分的所有同学

#### 分页
* `db.集合名.find().skip(num).limit(num);`
* 练习:
        1.查询学生集合第3到6条   

#### 排序
* `db.集合名.find().sort({条件:1|-1});`
* 练习:
    - 按成绩降序显示users集合

#### 模糊匹配
* `db.users.find({name:正则});`
* 练习：
    - 查询名称以小开头
    - 查询以小结尾的
    - 查询姓名包含小的文档
        
#### 获取此次查询的文档对象数量
* db.集合名.find({条件}).count();
* 练习:
    - 查询成绩大于等于90分的同学的数量

#### 并且和或者
* 并且 `多个key`
* 或者 `$or:[条件对象]`

#### 参考资料
* mongodb菜鸟教程,分组学习了就差不多
