<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>07-扇形动画2</title>
</head>
<body>
	<canvas id="canvas" width="600" height="400"></canvas>
	<script>
		var canvas = document.getElementById( 'canvas' ),
			ctx = canvas.getContext( '2d' );

		var w = canvas.width,
			h = canvas.height;

		var x0 = w / 2,
			y0 = h / 2;

		var step = 1; // 度数
		// 度数 转 弧度
		function toRadian( angle ) {
			return angle * Math.PI / 180;
		}

		// 1: 固定起始角度
		var start = toRadian( -150 );
		var end;

		var timer = window.setInterval( function() {
			// 动画停止条件
			if( start > toRadian( -30 ) ){
				window.clearInterval( timer );
				console.log( start );
				alert( 'complete.' );
				return;
			}
			// 获取 扇形的终止角度
			end = start + toRadian( step );
			// 绘制扇形
			ctx.beginPath();
			ctx.moveTo( x0, y0 );
			ctx.arc( x0, y0, 160, start, end );
			ctx.closePath();
			ctx.stroke();

			// 下一次扇形的起始角度 为 当前次 终止角度
			start = end;
		}, 20 );
	</script>
</body>
</html>